syntax = "proto3";

package master_client;

service MasterClient {
    // Get name and port of available datanode
    rpc MapReduce (MapReduceRequest) returns (MapReduceResponse) {}
    //Get status of a job
    rpc JobStatus(StatusRequest) returns (StatusResponse) {}
}

message MapReduceRequest {
    repeated string file_paths = 1;
    string map = 2;
    string reduce = 3;
    string job_path = 4;
    int32 num_maps = 5;
    int32 num_reducers = 6;
    string iterator = 7;
}

message MapReduceResponse {
    bool ok = 1;
    repeated string file_paths = 2;
    string message = 3;
    int32 job_id = 4;
}
message StatusRequest {
    int32 job_id = 1;
}
message StatusResponse {
    bool done = 1;
    repeated string file_paths = 2;
    int32 pending_maps_tasks = 3;
    int32 pending_reduce_tasks = 4;
}